# AZ-900 Introduction to Cloud Infrastructure

## 2 Describe Azure architecture and services

### 2.1 Describe the core architectural components of Azure

**Azure physical infrastructure**

- **Regions**: geographical area on the planet that contains at least one, but potentially multiple datacenters that are nearby and networked together with a low-latency network.

- **Availability zones**: Unique physical locations within an Azure region, made up of one or more datacenters; there is a minimum of 3 zones in each region. However, not all Azure Regions support availability zones. Azure services that support availability zones fall into three categories:

    | Zonal services | Zone-redundant services | Non-regional services |
    |----------------|-------------------------|-----------------------|
    | Resources are deployed in a specific availability zone. | Azure automatically replicates resources across availability zones. | Services are globally available and resilient to zone-wide and region-wide outages.

- **Region Pairs**: Most Azure regions are paired with another region within the same geography at least 300 miles away.

- **Sovereign Regions**: instances of Azure that are isolated from the main instance of Azure. May be needed for compliance or legal purposes. They exist in US and China.

**Azure management infrastructure**

- **Resource**: is the basic building block of Azure. Anything you create, provision, deploy, etc. is a resource. A resource can only be in one resource group.

- **Resource group**: groupings of resources. 

- **Azure subscriptions**: are a unit of management, billing and scale. Is a way to organize resource groups. They define boundaries for billing (separate costs) and access control (manage permissions).

- **Management groups**: a level of scope above subscriptions. You organize subscriptions into containers called management groups and apply governance conditions to the management groups

    ```
    Management Group
    └── Subscription
        └── Resource Group
            └── Resource
    ```

### 2.2 Describe Azure compute and networking services

**Azure virtual machines**

- **Virtual machines** are heavy software packages that provide complete emulation of low level hardware devices like CPU, Disk and Networking devices.

- **Virtual machine scale sets**: a logical group of VMs on Azure that can be configured and managed as a single unit. Able to add more/ reduce machines as demand grows/ slows.

- **Virtual machine availability sets**: improve virtual machine availability by grouping VMs in update domains (VMs that can be rebooted at the same time) and fault domains (VMs with common power source and network switch.).

**Azure virtual desktop**
- Desktop version of Windows that runs in the cloud 

**Azure Containers**
- VMs are limited to a single operating system per VM. To run multiple instances of an application on a single host machine, we must use containers.
- Containers are lightweight software packages that contain all the dependencies required to execute the contained software application.
- One of the most popular container engines is Docker, and Azure supports Docker.

Azure container options are:
- **Azure Container Instances (ACI)**: The quickest and simplest way to run containers in Azure. No VM or infrastructure management required. Fully managed PaaS—you upload the container, Azure runs it.

- **Azure Container Apps**: Similar to ACI but more powerful. Also PaaS, with built-in scaling and load balancing, making applications more elastic.

- **Azure Kubernetes Service (AKS)**: A full container orchestration platform for managing large numbers of containers, handling deployment, scaling, and lifecycle management.

**Azure Funtions**
- Azure Functions is a serverless compute option that doesn’t require maintaining virtual machines or containers. If you build an app using VMs or containers, those resources have to be “running” in order for your app to function.
- Functions scale automatically based on demand.
- Functions can be either stateless (default - behave as if they restart every time they respond to an event) or stateful (Durable Functions - a context is passed through the function to track prior activity).

**Azure hosting options**

- **Virtual Machines (VMs)**: Offer maximum control over the environment; familiar and highly configurable.

- **Containers**: Isolate and manage application components independently; flexible and efficient.

- **Azure App Service**: A fully managed PaaS for hosting web apps, APIs, background jobs, and mobile back ends—no infrastructure management required.
    - HTTP-based service thant support multiple languages and frameworks.
    - Provides automatic scaling, high availability, built-in load balancing, and secure endpoints.
    - Supports continuous deployment from GitHub, Azure DevOps, or any Git repo.
    - Types of App Services: Web Apps (Host web applications using popular languages and frameworks), API Apps (Build and host REST APIs with Swagger support, consumable via HTTP/HTTPS), WebJobs (Run background tasks or scripts, scheduled or trigger-based), Mobile Apps (Backend services for iOS and Android apps).

**Azure Virtual Networking**
- Azure Virtual Networks and subnets let Azure resources (VMs, apps, databases) communicate securely with each other, the internet, and on-premises networks. A VNet acts as an extension of your on-premises network in Azure.
    - **Virtual Network** : a representation of a real network. All VMs must be connected to a virtual network subnet, and this allows them to talk to each other and to the Internet. 
    - **Virtual Subnets**: a subdivision of a virtual network (VNet) that you control, that has its own security rules

- **Azure resource communication**: Connect VMs and services like AKS, App Service Environments, SQL, and Storage via :
    - **Service endpoints** : connect Azure resources to Azure Virtual Network. 
    - **Peering**: allows you to connect virtual networks together.

- **Communicate with on-premises resources** can be achieved by:
    - **Point-to-site** virtual private network connections are from a computer outside your organization back into your corporate network. *One user, one device, securely connecting to Azure.*
    - **Site-to-site** virtual private networks link your on-premises VPN device or gateway to the Azure VPN gateway in a virtual network. *Your entire office network is securely connected to Azure.*
    - **Azure ExpressRoute** provides a dedicated private connectivity to Azure that doesn't travel over the internet. ExpressRoute is useful for environments where you need greater bandwidth and even higher levels of security.

- **Traffic routing**: Control traffic using route tables, user-defined routes (UDR), and BGP.

- **Traffic filtering**: Secure networks using Network Security Groups (NSGs) and Network Virtual Appliances (NVAs).

**Azure private networks**
- A VPN creates an encrypted tunnel over the public internet to securely connect private networks and protect data in transit.

- VPN gateway types: 
    - **Policy-based**: Encrypts traffic based on static IP address rules; checks each packet against defined policies.
    - **Route-based** (preferred): Uses routing tables and tunnel interfaces to decide traffic paths; more flexible and resilient.

- High availability options: 
    - **Active/standby**: Default setup; automatic failover with short interruptions.
    - **Active/active**: Two active instances with separate public IPs (uses BGP); higher availability.
    - ExpressRoute failover: VPN gateway acts as a backup if ExpressRoute fails.
    - Zone-redundant gateways: Deployed across availability zones for maximum resilience and fault tolerance.

**Azure ExpressRoute**

- Private, dedicated connection **between on-premises networks and the Microsoft cloud** through a connectivity provider. This connection, called an ExpressRoute circuit, d**oes not use the public internet**, offering higher reliability, security, and performance.
- Uses BGP (Border Gateway Protocol) for dynamic route exchange

**Azure DNS**
- Azure DNS is a DNS hosting service that provides name resolution using Microsoft Azure’s global infrastructure.

### 2.3 Describe Azure storage services

**Storage redundancy**

- **Locally redundant stoage (LRS)**: replicates data 3 times in a single datacenter in the primary region. durability of 11 nines 

- **Zone-redundant storage (ZRS)**: replicates over 3 availability-zones in the primary region. 12 nines

- **Geo-redundnat storage (GRS)**: replicates data 3 times in a single datacenter in the primary region and 3 in the secondary. 16 nines.

- **Geo-zone-redundant storage (GZRS):** replicates over 3 availability-zones in the primary region and in the secondary. 16 nines.

**Storage services**

- **Azure Blobs**: an object storage solution that can store massive amounts of data. Azure Blob Storage is unstructured, meaning that there are no restrictions on the kinds of data it can hold. Blob Storage can manage thousands of simultaneous uploads, massive amounts of video data, constantly growing log files, and can be reached from anywhere with an internet connection. The available access tiers include:
    - **Hot** access tier: data that is accessed frequently.
    - **Cool** access tier: data that is stored for at least 30 days.
    - **Cold** access tier: data that is stored for at least 90 days.
    - **Archive** access tier: data that is stored for at least 180 days, with flexible latency requirements.

- **Azure Files**: managed file shares in the cloud that are accessible via the industry standard Server Message Block (SMB) or Network File System (NFS) protocols.

- **Azure Queues**: storing large numbers of messages. Queues are commonly used to create a backlog of work to process asynchronously.

- **Azure Disks**: Block-level storage volumes for Azure VMs.

- **Azure Tables:** stores large amounts of structured data. Azure tables are a NoSQL datastore. Ideal for storing structured, non-relational data.

**Data migration options**

- **Azure Migrate**: ideal for online, real-time migration of apps, VMs, and databases.

- **Azure Data Box**: ideal for offline, large-scale data transfer, especially when network bandwidth is limited. Stores up to 80 TB.

**File movement options**

- **Azcopy**: command line utility
- **Azure storage explorer**: graphical user interface
- **Azure file sync**: syncronizes Azure and on-premises Windows File Serever in birectional manner

### 2.4 Describe Azure identity, access, and security

**Directory services**

- **Microsoft Entra ID** is a cloud-based identity and access management (IAM) service that enables secure sign-in and access to Microsoft cloud services and custom applications. It integrates with on-premises Active Directory for hybrid identity scenarios Core capabilities:
    - **Authentication**: MFA, password policies, smart lockout, self-service password reset.
    - **Single Sign-On (SSO)**: One identity for multiple applications
    - **Application management**: SaaS apps, Application Proxy, My Apps portal
    - **Device management**: Device registration and Conditional Access (with Intune)

- **Microsoft Entra Domain Services** is a service that provides managed domain services such as domain join, group policy, lightweight directory access protocol (LDAP), and Kerberos/NTLM authentication. 

**Authentication Methods**
- **Password based**
- **Single Sign-ON (SSO)**: Allows a user to sign in once and access multiple apps and services.
- **Multifactor Authentication (MFA)**: combines something you know/ have and are.
- **Passwordless**: the password is removed and replaced with something users have, e.g., Windows 10 laptop/workstation or phone, plus something users are, or something users know, e.g., biometric or PIN. Requires device registration or enrollment. Azure supports three main options:
    - **Windows Hello for Business**: Biometric or PIN tied to the user’s Windows PC, supports SSO.
    - **Microsoft Authenticator app**: Phone acts as the passwordless credential; sign-in uses notification + biometric or PIN.
    - **FIDO2 security keys:** Hardware or device-based keys using open standards (WebAuthn), unphishable.

**Azure External Identities**

- **Business to Business** (B2B) Collaboration: Invite external users to access Microsoft or enterprise apps. **Users appear in your directory as guest accounts**. Example: Collaborators accessing Teams, SharePoint, or custom apps

- **B2B Direct Connect**: Two-way trust with another organization. Supports Teams shared channels. External **users do not appear in your directory**, but access is monitored via Teams

- **Business to Customer (B2C)**: Manage consumer identities for apps (non-Microsoft SaaS or custom apps). Use Azure AD B2C for authentication and authorization. Enables user-friendly registration, sign-in, and profile management

**Azure Conditional access**
- Conditional Access is a tool in Microsoft Entra ID that controls access to resources based on signals from users, devices, locations, and applications.

**Azure role-based access control**

- Azure RBAC allows you to **control access to resources** in your Azure environment by assigning roles to users, groups, or service principals. It follows the **principle of least privilege**: users get only the access they need.

- **Roles**: Built-in or custom roles define a set of permissions (owner, contributor, reader) - "What permissions".
- **Scopes**: Permissions are applied at a specific scope, which determines where the role applies (management group, subscription etc) - "where permissions apply".
- **Inheritance**: RBAC is hierarchical => Permissions granted at a parent scope are inherited by all child scopes.

**Zero Trust Security Model**
- Zero Trust assumes “never trust, always verify” — every access request is treated as if it comes from an untrusted network, even if it originates inside your organization. Core Principles: 
    - **Verify explicitly**: Always authenticate and authorize using all available signals: user identity, device, location, app, and data sensitivity.
    - **Use least privilege access**: Grant users only the access they need (Just-In-Time, Just-Enough-Access).
    - **Assume breach**: Minimize damage from potential breaches by: Segmenting access, Encrypting end-to-end, Using analytics for threat detection and defense improvement.

**Defense-in-depth**
- A defense-in-depth strategy uses a series of layered mechanisms to slow the advance of an attack that aims at acquiring unauthorized access to data. 
- defense-in-depth can be visualized as a set of layers, with the data to be secured at the center and all the other layers (application, compute, network, perrimeter, identity, physical security) functioning to protect that central data layer.

**Microsoft Defender for Cloud**
- A cloud-native **security monitoring and management too**l that helps you assess, secure, and defend your Azure, on-premises, hybrid, and multicloud environments.
- continuously assesses your security posture, applies hardening policies, and defends against threats across all your environments—Azure, on-premises, and other clouds.